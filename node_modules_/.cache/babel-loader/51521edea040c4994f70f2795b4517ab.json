{"ast":null,"code":"import _slicedToArray from\"C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';import{useHistory,useParams}from'react-router';import{useEffect}from'react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var BlogForm=function BlogForm(_ref){var editing=_ref.editing;var url='http://travelbusanko.com';var history=useHistory();var _useParams=useParams(),id=_useParams.id;console.log(id);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),originalTitle=_useState4[0],setOriginalTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),body=_useState6[0],setBody=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),originalBody=_useState8[0],setOriginalBody=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),publish=_useState10[0],setPublish=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),originalPublish=_useState12[0],setOriginalPublish=_useState12[1];useEffect(function(){if(editing){//axios.get(`http://localhost:5000/board_test/${id}`).then(res => {\n//axios.get(url + `/board_test/${id}`).then(res => {\naxios.get(url+\"/board_test/\".concat(id)).then(function(res){console.log(res.data[0].title);//console.log(\"test\");\n//console.log(id);\nsetTitle(res.data[0].title);console.log(title);setOriginalTitle(res.data[0].title);setBody(res.data[0].body);setOriginalBody(res.data[0].body);setPublish(res.data[0].publish);setOriginalPublish(res.data[0].publish);});}},[id,editing]);var isEdited=function isEdited(){return title!==originalTitle||body!==originalBody||publish!==originalPublish;};var goBack=function goBack(){if(editing){history.push(\"/blogs/\".concat(id));}else{history.push('/blogs');}};var onSubmit=function onSubmit(){//console.log(title, body);\nif(editing){axios.put(url+\"/board_test/\".concat(id),{title:title,//: title,\nbody:body//: body,\n//publish\n}).then(function(res){//console.log(res);\n//setOriginalTitle(res.data.title);              \n//setOriginalBody(res.data.body);\nhistory.push(\"/blogs/\".concat(id));});}else{axios.post(url+'/board_test/:id',{title:title,body:body// publish,\n// createdAt: Date.now()\n}).then(function(){history.push('/blogs');});}};var onChangePublish=function onChangePublish(e){console.log(e.target.checked);setPublish(e.target.checked);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",editing?'Edit a blog post':'Create a blog post',\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",value:title,onChange:function onChange(event){setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\" Content \"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:body,onChange:function onChange(event){setBody(event.target.value);},rows:\"10\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",\"mb-3\":true,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:publish,onChange:onChangePublish}),/*#__PURE__*/_jsx(\"label\",{className:\"from-check-label\",children:\"Publish\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:onSubmit,disabled:editing&&!isEdited(),children:editing?'Edit':'Post'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger ms-2\",onClick:goBack,children:\"Cancel\"})]});};BlogForm.defaultProps={editing:false};export default BlogForm;","map":{"version":3,"names":["useState","axios","useHistory","useParams","useEffect","BlogForm","editing","url","history","id","console","log","title","setTitle","originalTitle","setOriginalTitle","body","setBody","originalBody","setOriginalBody","publish","setPublish","originalPublish","setOriginalPublish","get","then","res","data","isEdited","goBack","push","onSubmit","put","post","onChangePublish","e","target","checked","event","value","defaultProps"],"sources":["C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/src/components/BlogForm.js"],"sourcesContent":["import { useState } from  'react';\r\nimport axios from 'axios';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { bool } from 'prop-types';\r\nimport { useEffect } from 'react';\r\n\r\nconst BlogForm = ( {editing} ) => {\r\n    const url = 'http://travelbusanko.com';\r\n    const history = useHistory();\r\n    const { id } = useParams();\r\n    console.log(id);\r\n\r\n    const [title, setTitle] = useState('');   \r\n    const [originalTitle, setOriginalTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [originalBody, setOriginalBody] = useState('');\r\n    const [publish, setPublish] = useState(true); \r\n    const [originalPublish, setOriginalPublish] = useState(false); \r\n\r\n    useEffect(()=>{\r\n      if (editing) {        \r\n      //axios.get(`http://localhost:5000/board_test/${id}`).then(res => {\r\n      //axios.get(url + `/board_test/${id}`).then(res => {\r\n      axios.get(url + `/board_test/${id}`).then(res => {\r\n        console.log(res.data[0].title);\r\n        //console.log(\"test\");\r\n        //console.log(id);\r\n        setTitle(res.data[0].title);\r\n        console.log(title);\r\n        setOriginalTitle(res.data[0].title);\r\n        setBody(res.data[0].body);\r\n        setOriginalBody(res.data[0].body);\r\n        setPublish(res.data[0].publish);\r\n        setOriginalPublish(res.data[0].publish);\r\n      })\r\n     }\r\n    },[id, editing]);\r\n\r\n    const isEdited =() =>{\r\n      return title !== originalTitle \r\n        || body !== originalBody\r\n        || publish !== originalPublish;\r\n    };\r\n\r\n    const goBack =()=>{\r\n      if(editing){ \r\n      history.push(`/blogs/${id}`);\r\n      } else {\r\n      history.push('/blogs');\r\n      }\r\n    }\r\n    \r\n\r\n    const onSubmit = () => {\r\n        //console.log(title, body);\r\n        if (editing) {       \r\n          axios.put(url + `/board_test/${id}`, {\r\n            title, //: title,\r\n            body //: body,\r\n            //publish\r\n          }).then(res => {\r\n              //console.log(res);\r\n              //setOriginalTitle(res.data.title);              \r\n              //setOriginalBody(res.data.body);\r\n              history.push(`/blogs/${id}`)\r\n          })\r\n\r\n        } else {\r\n            axios.post(url+ '/board_test/:id', {\r\n            title,\r\n            body\r\n           // publish,\r\n           // createdAt: Date.now()\r\n        }).then(() => {\r\n          history.push('/blogs');\r\n        })\r\n      }\r\n    };\r\n\r\n    const onChangePublish = (e)=>{\r\n      console.log(e.target.checked);\r\n      setPublish(e.target.checked);\r\n    };\r\n\r\n  return(\r\n        <div> \r\n        <h1> {editing ? 'Edit a blog post' : 'Create a blog post'} </h1>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Title</label>\r\n          <input \r\n            className=\"form-control\" \r\n            value= { title }\r\n            onChange={ (event)=> {\r\n              setTitle(event.target.value);  \r\n            } }\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\"> Content </label>\r\n          <textarea \r\n            className=\"form-control\" \r\n            value = { body }\r\n            onChange={ (event)=> {\r\n              setBody(event.target.value);\r\n            } }\r\n            rows=\"10\"\r\n          />\r\n        </div>\r\n        <div className=\"form-check\" mb-3>\r\n            <input\r\n              className=\"form-check-input\"\r\n              type =\"checkbox\"\r\n              checked={publish}\r\n              onChange={onChangePublish}\r\n            />\r\n            <label className=\"from-check-label\">\r\n              Publish\r\n            </label>\r\n        </div>\r\n\r\n        <button \r\n          className=\"btn btn-primary\" \r\n          onClick = { onSubmit } \r\n          disabled={editing && !isEdited()}\r\n        >\r\n         {editing ? 'Edit' : 'Post' } \r\n        </button>\r\n        <button \r\n          className=\"btn btn-danger ms-2\"   \r\n          onClick={goBack}    \r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    );\r\n};\r\n\r\n\r\nBlogForm.propTypes = {\r\n  editing: bool\r\n}\r\n\r\n\r\nBlogForm.defaultProps = {\r\n  editing: false\r\n}\r\nexport default BlogForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}