{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PKNU\\\\Documents\\\\GitHub\\\\travelbusanko\\\\travelbusanko\\\\src\\\\components\\\\BlogForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useHistory, useParams } from 'react-router';\nimport { bool } from 'prop-types';\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst BlogForm = _ref => {\n  _s();\n\n  let {\n    editing\n  } = _ref;\n  const url = 'http://travelbusanko.com';\n  const history = useHistory();\n  const {\n    id\n  } = useParams();\n  console.log(id);\n  const [title, setTitle] = useState('');\n  const [originalTitle, setOriginalTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [originalBody, setOriginalBody] = useState('');\n  const [publish, setPublish] = useState(true);\n  const [originalPublish, setOriginalPublish] = useState(false);\n  useEffect(() => {\n    if (editing) {\n      //axios.get(`http://localhost:5000/board_test/${id}`).then(res => {\n      //axios.get(url + `/board_test/${id}`).then(res => {\n      axios.get(url + `/board_test/${id}`).then(res => {\n        console.log(res.data[0].title); //console.log(\"test\");\n        //console.log(id);\n\n        setTitle(res.data[0].title);\n        console.log(title);\n        setOriginalTitle(res.data[0].title);\n        setBody(res.data[0].body);\n        setOriginalBody(res.data[0].body);\n        setPublish(res.data[0].publish);\n        setOriginalPublish(res.data[0].publish);\n      });\n    }\n  }, [id, editing]);\n\n  const isEdited = () => {\n    return title !== originalTitle || body !== originalBody || publish !== originalPublish;\n  };\n\n  const goBack = () => {\n    if (editing) {\n      history.push(`/blogs/${id}`);\n    } else {\n      history.push('/blogs');\n    }\n  };\n\n  const onSubmit = () => {\n    //console.log(title, body);\n    if (editing) {\n      axios.put(url + `/board_test/${id}`, {\n        title,\n        //: title,\n        body //: body,\n        //publish\n\n      }).then(res => {\n        //console.log(res);\n        //setOriginalTitle(res.data.title);              \n        //setOriginalBody(res.data.body);\n        history.push(`/blogs/${id}`);\n      });\n    } else {\n      axios.post(url + '/board_test/:id', {\n        title,\n        body // publish,\n        // createdAt: Date.now()\n\n      }).then(() => {\n        history.push('/blogs');\n      });\n    }\n  };\n\n  const onChangePublish = e => {\n    console.log(e.target.checked);\n    setPublish(e.target.checked);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\" \", editing ? 'Edit a blog post' : 'Create a blog post', \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control\",\n        value: title,\n        onChange: event => {\n          setTitle(event.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"form-label\",\n        children: \" Content \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"form-control\",\n        value: body,\n        onChange: event => {\n          setBody(event.target.value);\n        },\n        rows: \"10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-check\",\n      \"mb-3\": true,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: publish,\n        onChange: onChangePublish\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"from-check-label\",\n        children: \"Publish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: onSubmit,\n      disabled: editing && !isEdited(),\n      children: editing ? 'Edit' : 'Post'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-danger ms-2\",\n      onClick: goBack,\n      children: \"Cancel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BlogForm, \"JxlYflg+LiZ4Mj/JXx8JW2CkLmA=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = BlogForm;\nBlogForm.propTypes = {\n  editing: bool\n};\nBlogForm.defaultProps = {\n  editing: false\n};\nexport default BlogForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlogForm\");","map":{"version":3,"names":["useState","axios","useHistory","useParams","bool","useEffect","BlogForm","editing","url","history","id","console","log","title","setTitle","originalTitle","setOriginalTitle","body","setBody","originalBody","setOriginalBody","publish","setPublish","originalPublish","setOriginalPublish","get","then","res","data","isEdited","goBack","push","onSubmit","put","post","onChangePublish","e","target","checked","event","value","propTypes","defaultProps"],"sources":["C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/src/components/BlogForm.js"],"sourcesContent":["import { useState } from  'react';\r\nimport axios from 'axios';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { bool } from 'prop-types';\r\nimport { useEffect } from 'react';\r\n\r\nconst BlogForm = ( {editing} ) => {\r\n    const url = 'http://travelbusanko.com';\r\n    const history = useHistory();\r\n    const { id } = useParams();\r\n    console.log(id);\r\n\r\n    const [title, setTitle] = useState('');   \r\n    const [originalTitle, setOriginalTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [originalBody, setOriginalBody] = useState('');\r\n    const [publish, setPublish] = useState(true); \r\n    const [originalPublish, setOriginalPublish] = useState(false); \r\n\r\n    useEffect(()=>{\r\n      if (editing) {        \r\n      //axios.get(`http://localhost:5000/board_test/${id}`).then(res => {\r\n      //axios.get(url + `/board_test/${id}`).then(res => {\r\n      axios.get(url + `/board_test/${id}`).then(res => {\r\n        console.log(res.data[0].title);\r\n        //console.log(\"test\");\r\n        //console.log(id);\r\n        setTitle(res.data[0].title);\r\n        console.log(title);\r\n        setOriginalTitle(res.data[0].title);\r\n        setBody(res.data[0].body);\r\n        setOriginalBody(res.data[0].body);\r\n        setPublish(res.data[0].publish);\r\n        setOriginalPublish(res.data[0].publish);\r\n      })\r\n     }\r\n    },[id, editing]);\r\n\r\n    const isEdited =() =>{\r\n      return title !== originalTitle \r\n        || body !== originalBody\r\n        || publish !== originalPublish;\r\n    };\r\n\r\n    const goBack =()=>{\r\n      if(editing){ \r\n      history.push(`/blogs/${id}`);\r\n      } else {\r\n      history.push('/blogs');\r\n      }\r\n    }\r\n    \r\n\r\n    const onSubmit = () => {\r\n        //console.log(title, body);\r\n        if (editing) {       \r\n          axios.put(url + `/board_test/${id}`, {\r\n            title, //: title,\r\n            body //: body,\r\n            //publish\r\n          }).then(res => {\r\n              //console.log(res);\r\n              //setOriginalTitle(res.data.title);              \r\n              //setOriginalBody(res.data.body);\r\n              history.push(`/blogs/${id}`)\r\n          })\r\n\r\n        } else {\r\n            axios.post(url+ '/board_test/:id', {\r\n            title,\r\n            body\r\n           // publish,\r\n           // createdAt: Date.now()\r\n        }).then(() => {\r\n          history.push('/blogs');\r\n        })\r\n      }\r\n    };\r\n\r\n    const onChangePublish = (e)=>{\r\n      console.log(e.target.checked);\r\n      setPublish(e.target.checked);\r\n    };\r\n\r\n  return(\r\n        <div> \r\n        <h1> {editing ? 'Edit a blog post' : 'Create a blog post'} </h1>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\">Title</label>\r\n          <input \r\n            className=\"form-control\" \r\n            value= { title }\r\n            onChange={ (event)=> {\r\n              setTitle(event.target.value);  \r\n            } }\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label className=\"form-label\"> Content </label>\r\n          <textarea \r\n            className=\"form-control\" \r\n            value = { body }\r\n            onChange={ (event)=> {\r\n              setBody(event.target.value);\r\n            } }\r\n            rows=\"10\"\r\n          />\r\n        </div>\r\n        <div className=\"form-check\" mb-3>\r\n            <input\r\n              className=\"form-check-input\"\r\n              type =\"checkbox\"\r\n              checked={publish}\r\n              onChange={onChangePublish}\r\n            />\r\n            <label className=\"from-check-label\">\r\n              Publish\r\n            </label>\r\n        </div>\r\n\r\n        <button \r\n          className=\"btn btn-primary\" \r\n          onClick = { onSubmit } \r\n          disabled={editing && !isEdited()}\r\n        >\r\n         {editing ? 'Edit' : 'Post' } \r\n        </button>\r\n        <button \r\n          className=\"btn btn-danger ms-2\"   \r\n          onClick={goBack}    \r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    );\r\n};\r\n\r\n\r\nBlogForm.propTypes = {\r\n  editing: bool\r\n}\r\n\r\n\r\nBlogForm.defaultProps = {\r\n  editing: false\r\n}\r\nexport default BlogForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}