{"ast":null,"code":"import _slicedToArray from\"C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// src/pages/LoginPage.jsx\nimport{useEffect,useState}from\"react\";import{refreshToken}from'../token/Auth';import{Link,useHistory}from'react-router-dom';import'./LoginPage.css';import axios from\"axios\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var url='http://travelbusanko.com';function LoginPage(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputId=_useState2[0],setInputId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),inputPw=_useState4[0],setInputPw=_useState4[1];/// input data 변화시 value 값을 변경시 useState 해준다.\nvar handleInputId=function handleInputId(e){setInputId(e.target.value);};var handleinputPw=function handleinputPw(e){setInputPw(e.target.value);};function onClickLogin(){try{var data={userId:inputId,userPw:inputPw};axios.post(url+\"/api/login\",JSON.stringify(data),{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){if(res.data.userId===undefined){//[id 불일치] userID = undefined, msg = '입력하신 id가 유효하지 않습니다.'\nalert(\"입력하신 아이디가 일치하지 않습니다.\");Swal.fire({icon:\"warning\",title:\"로그인 에러\",text:'입력하신 아이디가 일치하지 않습니다.',showCancelButton:true,confirmButtonText:\"확인\",cancelButtonText:\"취소\"});}else if(res.data.userId===null){//[id 존재, pw 불일치] userID = null, msg = undefined\nalert(\"입력하신 비밀번호가 일치하지 않습니다.\");Swal.fire({icon:\"warning\",title:\"로그인 에러\",text:\"\\uC785\\uB825\\uD558\\uC2E0 \\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\",showCancelButton:true,confirmButtonText:\"확인\",cancelButtonText:\"취소\"});}else if(res.data.userId===inputId){//[id pw 일치] userID = userId1, msg = undefined\nSwal.fire({icon:'success',title:'로그인 성공',showConfirmButton:false,timer:1000,timerProgressBar:true});axios.defaults.headers.common['Authorization']='Bearer '+res.data;props.loginCallBack(true);props.accessToken(res.data.token);props.UserInfo(inputId);props.history.push(props);setTimeout(function(){refreshToken(null);window.location.href='http://travelbusanko.com';},60*10000);}}).catch(function(ex){console.log(\"login requset fail : \"+ex);}).finally(function(){console.log(\"login request end\");});}catch(e){console.log(e);}}useEffect(function(){});return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"Auth-form-container\",children:/*#__PURE__*/_jsx(\"form\",{className:\"Auth-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Auth-form-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"Auth-form-title\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mt-1\",placeholder:\"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\",name:\"user_id\",onChange:handleInputId})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control mt-1\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\",name:\"user_pw\",onChange:handleinputPw})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 mt-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:onClickLogin,children:\"\\uB85C\\uADF8\\uC778\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"forgot-password text-right mt-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/members/signup\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})})]})})})});}export default LoginPage;","map":{"version":3,"names":["useEffect","useState","refreshToken","Link","useHistory","axios","Swal","url","LoginPage","props","inputId","setInputId","inputPw","setInputPw","handleInputId","e","target","value","handleinputPw","onClickLogin","data","userId","userPw","post","JSON","stringify","headers","then","res","undefined","alert","fire","icon","title","text","showCancelButton","confirmButtonText","cancelButtonText","showConfirmButton","timer","timerProgressBar","defaults","common","loginCallBack","accessToken","token","UserInfo","history","push","setTimeout","window","location","href","catch","ex","console","log","finally"],"sources":["C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/src/members/LoginPage.js"],"sourcesContent":["// src/pages/LoginPage.jsx\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { refreshToken } from '../token/Auth';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport './LoginPage.css';\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst url = 'http://travelbusanko.com';\r\n\r\nfunction LoginPage(props){\r\n    \r\n    const [inputId, setInputId] = useState('');\r\n    const [inputPw, setInputPw] = useState('');\r\n    \r\n    /// input data 변화시 value 값을 변경시 useState 해준다.\r\n    const handleInputId = (e) => {\r\n        setInputId(e.target.value)\r\n    };\r\n\r\n    const handleinputPw = (e) => {\r\n        setInputPw(e.target.value)\r\n    }\r\n\r\n    function onClickLogin(){\r\n        \r\n        try{\r\n            let data = {userId: inputId, userPw: inputPw};\r\n            axios.post(url + \"/api/login\",JSON.stringify(data), {\r\n                headers: {\r\n                  \"Content-Type\": `application/json`,\r\n                }})\r\n            .then(res =>{\r\n                if(res.data.userId === undefined){\r\n                    //[id 불일치] userID = undefined, msg = '입력하신 id가 유효하지 않습니다.'\r\n                    alert(\"입력하신 아이디가 일치하지 않습니다.\");\r\n                    Swal.fire({\r\n                        icon: \"warning\",\r\n                        title: \"로그인 에러\",\r\n                        text: '입력하신 아이디가 일치하지 않습니다.',\r\n                        showCancelButton: true,\r\n                        confirmButtonText: \"확인\",\r\n                        cancelButtonText: \"취소\",\r\n                    })\r\n                } else if(res.data.userId === null){\r\n                    //[id 존재, pw 불일치] userID = null, msg = undefined\r\n                    alert(\"입력하신 비밀번호가 일치하지 않습니다.\")\r\n                    Swal.fire({\r\n                        icon: \"warning\",\r\n                        title: \"로그인 에러\",\r\n                        text: `입력하신 비밀번호가 일치하지 않습니다.`,\r\n                        showCancelButton: true,\r\n                        confirmButtonText: \"확인\",\r\n                        cancelButtonText: \"취소\",\r\n                    })\r\n                } else if(res.data.userId === inputId){\r\n                    //[id pw 일치] userID = userId1, msg = undefined\r\n                    Swal.fire({\r\n                        icon: 'success',\r\n                        title: '로그인 성공',\r\n                        showConfirmButton: false,\r\n                        timer: 1000,\r\n                        timerProgressBar: true,\r\n                    })\r\n                    axios.defaults.headers.common['Authorization'] = 'Bearer ' + res.data;\r\n                    \r\n                    props.loginCallBack(true);\r\n                    props.accessToken(res.data.token);\r\n                    props.UserInfo(inputId);\r\n                    props.history.push(props);\r\n                   \r\n                    setTimeout(function(){\r\n                        refreshToken(null);\r\n                        window.location.href= 'http://travelbusanko.com'; \r\n                    } , (60 * 10000));\r\n                }\r\n                \r\n            })\r\n            .catch(ex=>{\r\n                console.log(\"login requset fail : \" + ex);\r\n            })\r\n            .finally(()=>{console.log(\"login request end\")});\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    useEffect(()=>{\r\n        \r\n    })\r\n    \r\n    return(\r\n        <div className=\"App\">\r\n            <div className=\"Auth-form-container\">\r\n                <form className=\"Auth-form\">\r\n                    <div className=\"Auth-form-content\">\r\n                    <h3 className=\"Auth-form-title\">로그인</h3>\r\n                    <div className=\"form-group mt-3\">\r\n                        <label>아이디</label>\r\n                        <input type=\"text\" className=\"form-control mt-1\" placeholder=\"아이디를 입력하세요.\" name = \"user_id\" onChange = { handleInputId } />\r\n                    </div>\r\n                    <div className=\"form-group mt-3\">\r\n                        <label>비밀번호</label>\r\n                        <input type=\"password\" className=\"form-control mt-1\" placeholder=\"비밀번호를 입력하세요.\" name = \"user_pw\" onChange = { handleinputPw } />\r\n                    </div>\r\n                    <div className=\"d-grid gap-2 mt-3\">\r\n                        <button type=\"button\" className=\"btn btn-primary\" onClick = { onClickLogin } >\r\n                        로그인\r\n                        </button>\r\n                    </div>\r\n                    <p className=\"forgot-password text-right mt-2\">\r\n                        <Link to=\"/members/signup\">회원가입</Link>\r\n                    </p>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}