{"ast":null,"code":"import _objectSpread from\"C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{useEffect,useState}from'react';import LoginPage from'./members/LoginPage';import SignupPage from'./members/SignupPage';import HomePage from'./homes/HomePage';import AuthRoute from'./components/AuthRoute';import{refreshToken}from'./token/Auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),generateToken=_useState4[0],setToken=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),userInfo=_useState6[0],setUserInfo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var TOKEN='';useEffect(function(){try{refreshToken(loginCallBack);}catch(e){console.log(e);}},[]);function loginCallBack(login){setIsLogin(login);setLoading(true);}function accessToken(token){localStorage.setItem(\"token\",token);setToken(token);}function logoutCallBack(logout){setIsLogin(false);localStorage.setItem(\"token\",'undefined');window.location.href='http://travelbusanko.com';// 'http://localhost:3000'; //\n}function UserInfo(object){localStorage.setItem(\"user\",object);setUserInfo(object);}console.log(isLogin+\" \"+localStorage.getItem(\"token\"));if(loading){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(_Fragment,{children:!isLogin&&localStorage.getItem(\"token\")=='undefined'||localStorage.getItem(\"token\")==null?/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(props){return/*#__PURE__*/_jsx(LoginPage,_objectSpread(_objectSpread({},props),{},{loginCallBack:loginCallBack,UserInfo:UserInfo,accessToken:accessToken}));}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/members/signup\",component:SignupPage},'/members/signup')]}):/*#__PURE__*/_jsx(AuthRoute,{exact:true,isLogin:isLogin,path:\"/home\",component:HomePage,UserInfo:localStorage.getItem(\"user\"),logoutCallBack:logoutCallBack,accessToken:generateToken})})});}else{return/*#__PURE__*/_jsx(\"div\",{children:\"Loading ....\"});}}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Switch","Route","useEffect","useState","LoginPage","SignupPage","HomePage","AuthRoute","refreshToken","App","isLogin","setIsLogin","generateToken","setToken","userInfo","setUserInfo","loading","setLoading","TOKEN","loginCallBack","e","console","log","login","accessToken","token","localStorage","setItem","logoutCallBack","logout","window","location","href","UserInfo","object","getItem","props"],"sources":["C:/Users/PKNU/Documents/GitHub/travelbusanko/travelbusanko/src/App.js"],"sourcesContent":["import {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport { useEffect, useState } from 'react';\nimport LoginPage from './members/LoginPage';\nimport SignupPage from './members/SignupPage';\nimport HomePage from './homes/HomePage';\nimport AuthRoute from './components/AuthRoute';\nimport { refreshToken } from './token/Auth';\n\n\nfunction App(){\n    \n    const [isLogin , setIsLogin] = useState(false);\n    const [generateToken , setToken] = useState(false);\n    const [userInfo , setUserInfo] = useState(false);\n    const [loading , setLoading] = useState(false);\n    var TOKEN = '';\n    useEffect(()=>{\n      try{\n          refreshToken(loginCallBack);\n      }catch(e){\n          console.log(e);\n      }\n    },[]);\n  \n    function loginCallBack(login){\n      setIsLogin(login);\n      setLoading(true);\n    }\n\n    function accessToken(token){\n      localStorage.setItem(\"token\", token);\n      setToken(token);\n    }\n\n    function logoutCallBack(logout){\n      setIsLogin(false);\n      localStorage.setItem(\"token\", 'undefined');\n      window.location.href=  'http://travelbusanko.com'; // 'http://localhost:3000'; //\n    }\n\n    function UserInfo(object){\n      localStorage.setItem(\"user\", object);\n      setUserInfo(object);\n    }\n    console.log(isLogin + \" \" + localStorage.getItem(\"token\"));\n    if(loading){\n      return ( \n        <Router>\n        <>\n          {!isLogin && localStorage.getItem(\"token\") == 'undefined' || localStorage.getItem(\"token\") == null ? (\n            <Switch>\n              <Route exact path=\"/\" render={(props)=> <LoginPage {...props} loginCallBack={loginCallBack} UserInfo={UserInfo} accessToken={accessToken} />} />\n              <Route exact path=\"/members/signup\" component={SignupPage} key='/members/signup' />          \n            </Switch>\n            ) : (\n              <AuthRoute exact isLogin={isLogin} path=\"/home\" component={HomePage} UserInfo={localStorage.getItem(\"user\")} logoutCallBack={logoutCallBack} accessToken={generateToken} />\n            )\n          }\n        </>          \n        </Router>\n      );\n    } else {\n      return (\n        <div>\n          Loading ....\n        </div>\n      )\n    }\n}\n\nexport default App;\n"],"mappings":"+RAAA,OACEA,aAAa,GAAIC,OADnB,CAEEC,MAFF,CAGEC,KAHF,KAIO,kBAJP,CAKA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,UAAP,KAAsB,qBAAtB,CACA,MAAOC,WAAP,KAAuB,sBAAvB,CACA,MAAOC,SAAP,KAAqB,kBAArB,CACA,MAAOC,UAAP,KAAsB,wBAAtB,CACA,OAASC,YAAT,KAA6B,cAA7B,C,6IAGA,QAASC,IAAT,EAAc,CAEV,cAA+BN,QAAQ,CAAC,KAAD,CAAvC,wCAAOO,OAAP,eAAiBC,UAAjB,eACA,eAAmCR,QAAQ,CAAC,KAAD,CAA3C,yCAAOS,aAAP,eAAuBC,QAAvB,eACA,eAAiCV,QAAQ,CAAC,KAAD,CAAzC,yCAAOW,QAAP,eAAkBC,WAAlB,eACA,eAA+BZ,QAAQ,CAAC,KAAD,CAAvC,yCAAOa,OAAP,eAAiBC,UAAjB,eACA,GAAIC,MAAK,CAAG,EAAZ,CACAhB,SAAS,CAAC,UAAI,CACZ,GAAG,CACCM,YAAY,CAACW,aAAD,CAAZ,CACH,OAAMC,CAAN,CAAQ,CACLC,OAAO,CAACC,GAAR,CAAYF,CAAZ,EACH,CACF,CANQ,CAMP,EANO,CAAT,CAQA,QAASD,cAAT,CAAuBI,KAAvB,CAA6B,CAC3BZ,UAAU,CAACY,KAAD,CAAV,CACAN,UAAU,CAAC,IAAD,CAAV,CACD,CAED,QAASO,YAAT,CAAqBC,KAArB,CAA2B,CACzBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACAZ,QAAQ,CAACY,KAAD,CAAR,CACD,CAED,QAASG,eAAT,CAAwBC,MAAxB,CAA+B,CAC7BlB,UAAU,CAAC,KAAD,CAAV,CACAe,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B,WAA9B,EACAG,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,0BAAvB,CAAmD;AACpD,CAED,QAASC,SAAT,CAAkBC,MAAlB,CAAyB,CACvBR,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BO,MAA7B,EACAnB,WAAW,CAACmB,MAAD,CAAX,CACD,CACDb,OAAO,CAACC,GAAR,CAAYZ,OAAO,CAAG,GAAV,CAAgBgB,YAAY,CAACS,OAAb,CAAqB,OAArB,CAA5B,EACA,GAAGnB,OAAH,CAAW,CACT,mBACE,KAAC,MAAD,wBACA,yBACG,CAACN,OAAD,EAAYgB,YAAY,CAACS,OAAb,CAAqB,OAArB,GAAiC,WAA7C,EAA4DT,YAAY,CAACS,OAAb,CAAqB,OAArB,GAAiC,IAA7F,cACC,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,MAAM,CAAE,gBAACC,KAAD,qBAAU,KAAC,SAAD,gCAAeA,KAAf,MAAsB,aAAa,CAAEjB,aAArC,CAAoD,QAAQ,CAAEc,QAA9D,CAAwE,WAAW,CAAET,WAArF,GAAV,EAA9B,EADF,cAEE,KAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,iBAAlB,CAAoC,SAAS,CAAEnB,UAA/C,EAA+D,iBAA/D,CAFF,GADD,cAMG,KAAC,SAAD,EAAW,KAAK,KAAhB,CAAiB,OAAO,CAAEK,OAA1B,CAAmC,IAAI,CAAC,OAAxC,CAAgD,SAAS,CAAEJ,QAA3D,CAAqE,QAAQ,CAAEoB,YAAY,CAACS,OAAb,CAAqB,MAArB,CAA/E,CAA6G,cAAc,CAAEP,cAA7H,CAA6I,WAAW,CAAEhB,aAA1J,EAPN,EADA,EADF,CAeD,CAhBD,IAgBO,CACL,mBACE,qCADF,CAKD,CACJ,CAED,cAAeH,IAAf"},"metadata":{},"sourceType":"module"}